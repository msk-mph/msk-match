# MSK-MATCH

This repository contains code to support the manuscript: *Human-AI collaboration enables rapid, high-fidelity cancer clinical trial eligibility screening*. The `trialmatcher` package runs the Memorial Sloan Kettering Multi-Agent Trial Coordination Hub (MSK-MATCH), an LLM-based system to perform AI-assisted clinical trial eligibilty prescreening.

> [!IMPORTANT]
> Due to patient privacy and security protections, sensitive data has been redacted from this public repository.


## Installation

This code requires Python 3.12. Full dependencies are listed in `src/trialmatcher/pyproject.toml`. 

To install the `trialmatcher` package:

```pip install -e src/```

## Example data

To protect patient privacy, this repository does not include any real patient data. Instead, we provide a small synthetic dataset generated by GPT-4o for demonstration purposes only. This synthetic data is not representative of real clinical data but is intended to help users get started quickly.

- Synthetic patient records: `demo/patient_records/docs_1234.json`  
- Example knowledge base: `demo/kb.txt`  

## Run example workflow

Use the following command to run the example workflow with the synthetic data:

```bash
python demo/demo.py \
    --config demo/demo_config.json \    # Path to the configuration file  
    --mrn 1234 \                        # Medical record number for synthetic patient data  
    --api_endpoint XXXXXX               # Your Azure OpenAI API endpoint URL  
    --api_key XXXXXX                    # Your Azure OpenAI API key  
```

**Note:** Replace `XXXXXX` with your actual Azure OpenAI API endpoint and key. This script runs on standard hardware, with typical runtimes of 2-3 minutes per {patient, trial} pair in the multi-expert configuration. Document embedding and vectorstore creation take less than 1 minute for demo data but may scale with dataset size.

## Contact

We encourage collaboration, questions, and feedback! Please reach out to the maintainers:

- Jacob Rosenthal: [jtr4002@med.cornell.edu](mailto:jtr4002@med.cornell.edu)  
- Anyi Li: [LiA5@mskcc.org](mailto:LiA5@mskcc.org)  
